;; устанавливаю адрес 3000
org 3000
chislo: 
	int 123
goto: 
	OUTMEMU chislo	; вывожу число по адресу 3000, т.е число 123  (ожидаемый результат: 123)

;; устанавливаю адрес 5000
org 5000			
adr:
	int goto		; по адресу 5000 записываю значение 3004, это число будет использоваться как адрес команды для команды косвенного прямого перехода

;; устанавливаю адрес 2000
org 2000			; устанавливаю адрес на 2000, в это место мы придем потом с помощью команды прямого перехода
int 777	
direct_goto:		; 2004
	OUTMEMU $-4		; вывожу число по адресу 2000, т.е число 777  (ожидаемый результат: 777)
	JMPIND adr		; команда косвенного прямого перехода, по адресу 5000 берем значение (3004) и осуществляем прямой переход по этому значению 

org 1000		; устанавливаю адрес на 1000
val: int 158 			; 1000
int 13  			; 1004
int 55 			; 1008
int 195495		; 1012
start: LOAD val		; число 158 по адресу 1000 в стек (в стеке: 158)
LOAD val+4		; число 13 по адресу 1004 в стек (в стеке: 13 158)
LOADI -343		; число -343 (непосредственная адресация) в стек (в стеке: -343 13 158)
LOAD val+12		; число 195495 по адресу 1012 в стек (в стеке: 195495 -343 13 158)
JMPOFP 12		; ip = 1028 на этой команде, переходим на 12 вперед => на команду по адресу 1040
XCHG 2			; ip = 1031, обмен значений ST[SP] = 195495 и ST[SP-2] = 13 в стеке (в стеке: 13 -343 195495 158)
IADD val+8		; сложение ST[SP] = 13 + 55 (число по адресу 1008) => 68 (в стеке: 68 -343 195495 158)
JMPOFP 9			; ip = 1037, перешагиваем через команды ниже на 9 вперед на адрес 1046
OUTSTU			; ip = 1040 (ожидаемый результат: 195495, а не 68, из-за безусловного перехода вперед)
JMPOFM 12		; ip = 1043, переходим на назад 12 => на команду по адресу 1031
OUTSTU			; ip = 1046 (ожидаемый результат: 68)
JMP direct_goto		; прямой безусловный переход на адрес 2004
OUTMEMU val+8		; вывод числа по адресу 1008, но до этой команды не дойдет
end start			; программу начинаем выполнять с адреса 1016
