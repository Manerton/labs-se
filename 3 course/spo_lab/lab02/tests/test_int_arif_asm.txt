org 2000
results: memint 9
org 1000		; устанавливаю адрес на 1000
value1: int 195495 		; 1000-1003
int 55 			; 1004-1007
int 158		    ; 1008-1011
value2: int 13			; 1012
value3: int 208			; 1016
int -34			; 1020
value4: int 5			; 1024
value5: int 56			; 1028
minustwo: int -2
otricChislo: equ -113
DataSize: equ 4
; загружаю в стек
start: LOAD value1		; число 195495 по адресу 1000 в стек (в стеке: 195495)
LOADI otricChislo*3-4		; число -343 в стек (непосредственная адресация) (в стеке: -343 195495)
LOAD value1 + DataSize*2		; число 158 по адресу 1008 в стек (в стеке: 158 -343 195495)
; начинаю арифметику
; сложение
IADD value2		; складываю ST[SP] = 158 + число по адресу 1012 = 13 -> ST[SP] = 171
SAVEP results		; сохраняю результат в память по адресу 2000 и удаляю вершину (в стеке: -343 195495)
; вычитание
ISUB value3		; из -343 вычитаю 208 = ST[SP] = -551 (в стеке: -551 195495)
SAVEP results+DataSize		; сохраняю результат в память по адресу 2004 и удаляю вершину (в стеке: 195495)
LOAD value1+4		; число 55 по адресу 1004 в стек (в стеке: 55 195495)
XCHG 1			; меняю числа в стеке местами (в стеке: 195495 55)
; деление
IDIV value2		; делю ST[SP] = 195495 / 13 => ST[SP] = 15038 (в стеке: 15038 55)
SAVE results + DataSize*2		; сохраняю результат в память по адресу 2008 (в стеке: 15038 55)
IDIV value3+DataSize		; делю ST[SP] = 15038 / -34 => ST[SP] = -442 (в стеке: -442 55)
SAVE results + DataSize*3		; сохраняю результат в память по адресу 2012 (в стеке: -442 55)
IDIV results + DataSize*3 		; делю ST[SP] = -442 / -442 => ST[SP] = 1 (в стеке: 1 55)
SAVE results + (DataSize*4)		; сохраняю результат в память по адресу 2016 (в стеке: 1 55)
IDIV value4		; делю ST[SP] = 1 / 5 => ST[SP] = 0 (в стеке: 0 55)
SAVEP results + (DataSize*5)		; сохраняю результат в память по адресу 2020 и удаляю вершину (в стеке: 55)
; умножение
IMUL value5		; умножаю ST[SP] = 55 * 56 => ST[SP] = 3080 (в стеке: 3080)
SAVE results + (DataSize*6)		; сохраняю результат в память по адресу 2024 (в стеке: 3080)
IMUL minustwo		; умножаю ST[SP] = 3080 * -2 => ST[SP] = -6160 (в стеке: -6160)
SAVE results + (DataSize*7)		; сохраняю результат в память по адресу 2028 (в стеке: -6160)
IMUL results+20
SAVE results + (DataSize*5) 		; умножаю ST[SP] = -6160 * 0 => ST[SP] = 0	(в стеке: 0)
; вывод сохраненных значений
OUTMEMU results		; (ожидаемый результат: 171)
OUTMEMI results+4		; (ожидаемый результат: -551)
OUTMEMU results+8		; (ожидаемый результат: 15038)
OUTMEMI results+12		; (ожидаемый результат: -442)
OUTMEMU results+12		; (ожидаемый результат: 4294966854)
OUTMEMU results+16		; (ожидаемый результат: 1)
OUTMEMU results+20		; (ожидаемый результат: 0)
OUTMEMU results+24		; (ожидаемый результат: 3080)
OUTMEMI results+28		; (ожидаемый результат: -6160)
OUTSTU			; вывожу из стека (ожидаемый результат: 0)
end start